const t=function(t,e){return Number(Math.round(t+"e"+e)+"e-"+e)},e=function(t){return t.split(",").map(t=>t.trim().replace(/\s+/g," ")).filter(t=>t.length)},n=function(t){let e=[];return e.push.apply(e,document.querySelectorAll(t)),e};let r=function(){const t="[data-onscreenness]";let r=[],o=[],i={};const c=function(t,e){e.forEach(e=>{t.includes(e)||t.push(e)})};return{collect:function(t,n){let o=e(t);return c(r,o),n&&"function"==typeof n&&o.forEach(t=>i[t]=n),o},exclude:function(t){let n=e(t);return c(o,n),n},remove:function(t){let n=e(t),o=function(t,e){let n={};return t.forEach(t=>n[t]=1),e.filter(t=>{if(1===n[t])return delete n[t],t})}(r,n);return o.forEach(t=>{r.splice(r.indexOf(t),1)}),o},reset:function(){return r=[],o=[],[t]},getVariables:()=>({queryList:r.concat(),blackList:o.concat(),callbackObj:Object.assign({},i)}),buildNodeList:function(){let e=[t].concat(r),i=n(e.join(",")),c=o.length?n(o.join(",")):[];return i.filter(t=>!c.includes(t))},buildCallbackMap:function(){let t=new Map;return Object.entries(i).forEach(([e,r])=>{n(e).forEach(e=>{t.set(e,r)})}),t}}}(),o={detachIdentifiers:function(t){(t.length?n(t.join(",")):[]).forEach(function(t){t&&(t.classList.remove("onscreen"),t.classList.remove("offscreen"),t.classList.remove("crossscreen"),t.classList.remove("overscreen"),delete t.dataset.onscreenness,delete t.dataset.overlapping)})},calculatePresence:function(t){let e={left:0-t.left,right:t.right-document.documentElement.clientWidth,top:0-t.top,bottom:t.bottom-document.documentElement.clientHeight},n=Math.min(Math.max(e.left,0),t.width),r=Math.min(Math.max(e.right,0),t.width),o=Math.min(Math.max(e.top,0),t.height),i=Math.min(Math.max(e.bottom,0),t.height),c=1-n/t.width-r/t.width,a=1-o/t.height-i/t.height,u=(t.width-n-r)/document.documentElement.clientWidth,l=(t.height-o-i)/document.documentElement.clientHeight,s=t.width/document.documentElement.clientWidth,f=t.height/document.documentElement.clientHeight;return{overhang:e,widthRatio:s,heightRatio:f,areaRatio:s*f,horizontalOverlap:u,verticalOverlap:l,surfaceOverlap:u*l,horizontalPresence:c,verticalPresence:a,surfacePresence:c*a}},attachIdentifiers:function(e,n){let r={},o=t=>{t.addClass?(r.addClass=r.addClass?`${r.addClass} ${t.addClass}`:t.addClass,e.classList.add(t.addClass)):(r.removeClass=r.removeClass?`${r.removeClass} ${t.removeClass}`:t.removeClass,e.classList.remove(t.removeClass))},i=(t,n)=>{let r=e.classList.contains(t);n&&!r&&o({addClass:t}),!n&&r&&o({removeClass:t})},c=t(n.surfacePresence,3);e.dataset.onscreenness=String(c),i("onscreen",1===c),i("crossscreen",c>0&&c<1),i("offscreen",0===c);let a=t(n.surfaceOverlap,3);e.dataset.overlapping=String(a);let u=n.widthRatio>1&&1===n.horizontalOverlap&&1===n.verticalPresence,l=n.heightRatio>1&&1===n.verticalOverlap&&1===n.horizontalPresence;return i("overscreen",1===n.surfaceOverlap||u||l),r}};var i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function c(t,e){return t(e={exports:{}},e.exports),e.exports}var a,u,l,s,f="object",d=function(t){return t&&t.Math==Math&&t},h=d(typeof globalThis==f&&globalThis)||d(typeof window==f&&window)||d(typeof self==f&&self)||d(typeof i==f&&i)||Function("return this")(),p=function(t){try{return!!t()}catch(t){return!0}},v=!p(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a}),g={}.propertyIsEnumerable,m=Object.getOwnPropertyDescriptor,y={f:m&&!g.call({1:2},1)?function(t){var e=m(this,t);return!!e&&e.enumerable}:g},b=function(t,e){return{enumerable:!(1&t),configurable:!(2&t),writable:!(4&t),value:e}},L={}.toString,S=function(t){return L.call(t).slice(8,-1)},w="".split,E=p(function(){return!Object("z").propertyIsEnumerable(0)})?function(t){return"String"==S(t)?w.call(t,""):Object(t)}:Object,O=function(t){if(null==t)throw TypeError("Can't call method on "+t);return t},M=function(t){return E(O(t))},C=function(t){return"object"==typeof t?null!==t:"function"==typeof t},P=function(t,e){if(!C(t))return t;var n,r;if(e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;if("function"==typeof(n=t.valueOf)&&!C(r=n.call(t)))return r;if(!e&&"function"==typeof(n=t.toString)&&!C(r=n.call(t)))return r;throw TypeError("Can't convert object to primitive value")},j={}.hasOwnProperty,T=function(t,e){return j.call(t,e)},I=h.document,x=C(I)&&C(I.createElement),k=!v&&!p(function(){return 7!=Object.defineProperty(("div",x?I.createElement("div"):{}),"a",{get:function(){return 7}}).a}),A=Object.getOwnPropertyDescriptor,N={f:v?A:function(t,e){if(t=M(t),e=P(e,!0),k)try{return A(t,e)}catch(t){}if(T(t,e))return b(!y.f.call(t,e),t[e])}},R=function(t){if(!C(t))throw TypeError(String(t)+" is not an object");return t},V=Object.defineProperty,_={f:v?V:function(t,e,n){if(R(t),e=P(e,!0),R(n),k)try{return V(t,e,n)}catch(t){}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(t[e]=n.value),t}},D=v?function(t,e,n){return _.f(t,e,b(1,n))}:function(t,e,n){return t[e]=n,t},z=function(t,e){try{D(h,t,e)}catch(n){h[t]=e}return e},G=c(function(t){var e=h["__core-js_shared__"]||z("__core-js_shared__",{});(t.exports=function(t,n){return e[t]||(e[t]=void 0!==n?n:{})})("versions",[]).push({version:"3.1.3",mode:"global",copyright:"Â© 2019 Denis Pushkarev (zloirock.ru)"})}),F=G("native-function-to-string",Function.toString),H=h.WeakMap,W="function"==typeof H&&/native code/.test(F.call(H)),q=0,$=Math.random(),B=function(t){return"Symbol("+String(void 0===t?"":t)+")_"+(++q+$).toString(36)},K=G("keys"),Y={},J=h.WeakMap;if(W){var Q=new J,U=Q.get,X=Q.has,Z=Q.set;a=function(t,e){return Z.call(Q,t,e),e},u=function(t){return U.call(Q,t)||{}},l=function(t){return X.call(Q,t)}}else{var tt=K[s="state"]||(K[s]=B(s));Y[tt]=!0,a=function(t,e){return D(t,tt,e),e},u=function(t){return T(t,tt)?t[tt]:{}},l=function(t){return T(t,tt)}}var et,nt,rt,ot={set:a,get:u,has:l,enforce:function(t){return l(t)?u(t):a(t,{})},getterFor:function(t){return function(e){var n;if(!C(e)||(n=u(e)).type!==t)throw TypeError("Incompatible receiver, "+t+" required");return n}}},it=c(function(t){var e=ot.get,n=ot.enforce,r=String(F).split("toString");G("inspectSource",function(t){return F.call(t)}),(t.exports=function(t,e,o,i){var c=!!i&&!!i.unsafe,a=!!i&&!!i.enumerable,u=!!i&&!!i.noTargetGet;"function"==typeof o&&("string"!=typeof e||T(o,"name")||D(o,"name",e),n(o).source=r.join("string"==typeof e?e:"")),t!==h?(c?!u&&t[e]&&(a=!0):delete t[e],a?t[e]=o:D(t,e,o)):a?t[e]=o:z(e,o)})(Function.prototype,"toString",function(){return"function"==typeof this&&e(this).source||F.call(this)})}),ct=h,at=function(t){return"function"==typeof t?t:void 0},ut=Math.ceil,lt=Math.floor,st=function(t){return isNaN(t=+t)?0:(t>0?lt:ut)(t)},ft=Math.min,dt=function(t){return t>0?ft(st(t),9007199254740991):0},ht=Math.max,pt=Math.min,vt=function(t){return function(e,n,r){var o,i=M(e),c=dt(i.length),a=function(t,e){var n=st(r);return n<0?ht(n+e,0):pt(n,e)}(0,c);if(t&&n!=n){for(;c>a;)if((o=i[a++])!=o)return!0}else for(;c>a;a++)if((t||a in i)&&i[a]===n)return t||a||0;return!t&&-1}},gt=(vt(!0),vt(!1)),mt=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"].concat("length","prototype"),yt={f:Object.getOwnPropertyNames||function(t){return function(t,e){var n,r=M(t),o=0,i=[];for(n in r)!T(Y,n)&&T(r,n)&&i.push(n);for(;e.length>o;)T(r,n=e[o++])&&(~gt(i,n)||i.push(n));return i}(t,mt)}},bt={f:Object.getOwnPropertySymbols},Lt=function(t,e){return arguments.length<2?at(ct[t])||at(h[t]):ct[t]&&ct[t][e]||h[t]&&h[t][e]}("Reflect","ownKeys")||function(t){var e=yt.f(R(t)),n=bt.f;return n?e.concat(n(t)):e},St=function(t,e){for(var n=Lt(e),r=_.f,o=N.f,i=0;i<n.length;i++){var c=n[i];T(t,c)||r(t,c,o(e,c))}},wt=/#|\.prototype\./,Et=function(t,e){var n=Mt[Ot(t)];return n==Pt||n!=Ct&&("function"==typeof e?p(e):!!e)},Ot=Et.normalize=function(t){return String(t).replace(wt,".").toLowerCase()},Mt=Et.data={},Ct=Et.NATIVE="N",Pt=Et.POLYFILL="P",jt=Et,Tt=N.f,It=Array.isArray||function(t){return"Array"==S(t)},xt=!!Object.getOwnPropertySymbols&&!p(function(){return!String(Symbol())}),kt=h.Symbol,At=G("wks"),Nt=At[et="species"]||(At[et]=xt&&kt[et]||(xt?kt:B)("Symbol."+et)),Rt=function(t,e){var n;return It(t)&&("function"!=typeof(n=t.constructor)||n!==Array&&!It(n.prototype)?C(n)&&null===(n=n[Nt])&&(n=void 0):n=void 0),new(void 0===n?Array:n)(0===e?0:e)},Vt=[].push,_t=function(t){var e=1==t,n=2==t,r=3==t,o=4==t,i=6==t,c=5==t||i;return function(a,u,l,s){for(var f,d,h=Object(O(a)),p=E(h),v=function(t,e,n){if(function(t){if("function"!=typeof t)throw TypeError(String(t)+" is not a function")}(t),void 0===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}}(u,l,3),g=dt(p.length),m=0,y=s||Rt,b=e?y(a,g):n?y(a,0):void 0;g>m;m++)if((c||m in p)&&(d=v(f=p[m],m,h),t))if(e)b[m]=d;else if(d)switch(t){case 3:return!0;case 5:return f;case 6:return m;case 2:Vt.call(b,f)}else if(o)return!1;return i?-1:r||o?o:b}},Dt=[_t(0),_t(1),_t(2),_t(3),_t(4),_t(5),_t(6)][0],zt=(nt=[].forEach)&&p(function(){nt.call(null,function(){throw 1},1)})?[].forEach:function(t){return Dt(this,t,arguments.length>1?arguments[1]:void 0)};for(var Gt in function(t,e){var n,r,o,i,c,a=t.target,u=t.global,l=t.stat;if(n=u?h:l?h[a]||z(a,{}):(h[a]||{}).prototype)for(r in e){if(i=e[r],o=t.noTargetGet?(c=Tt(n,r))&&c.value:n[r],!jt(u?r:a+(l?".":"#")+r,t.forced)&&void 0!==o){if(typeof i==typeof o)continue;St(i,o)}(t.sham||o&&o.sham)&&D(i,"sham",!0),it(n,r,i,t)}}({target:"Array",proto:!0,forced:[].forEach!=zt},{forEach:zt}),{CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}){var Ft=h[Gt],Ht=Ft&&Ft.prototype;if(Ht&&Ht.forEach!==zt)try{D(Ht,"forEach",zt)}catch(i){Ht.forEach=zt}}var Wt=(rt=function(t){t instanceof Array||(t=[t]),t.forEach(function(t){return t()})},{onInteractive:function(t){"loading"===document.readyState?window.addEventListener("DOMContentLoaded",function(e){rt(t)}):rt(t)},onComplete:function(t){"complete"===document.readyState?rt(t):window.addEventListener("load",function(e){rt(t)})}});export default function(){let t=function(){let t=r.buildCallbackMap();r.buildNodeList().forEach(function(e){let n=e.getBoundingClientRect(),r=o.calculatePresence(n),i=o.attachIdentifiers(e,r);Object.assign(r,i);let c=t.get(e);c&&c.call(e,r)})};window.addEventListener("resize",t,!1),window.addEventListener("scroll",t,!0);let e=new MutationObserver(function(e,n){e.length&&t()});return Wt.onInteractive([t,function(){e.observe(document.body,{childList:!0,subtree:!0})}]),{publicAPI:{collect:function(e,n){r.collect(e,n),Wt.onInteractive([t])},exclude:function(e){Wt.onInteractive([function(){o.detachIdentifiers(r.exclude(e))},t])},remove:function(e){Wt.onInteractive([function(){o.detachIdentifiers(r.remove(e))},t])},reset:function(){Wt.onInteractive([function(){o.detachIdentifiers(r.reset())}])}},testSuite:{getVariables:r.getVariables,trigger:t,liveList:r.buildNodeList,kickList:r.buildCallbackMap,calculate:o.calculatePresence,treat:o.attachIdentifiers}}}().publicAPI;
//# sourceMappingURL=index.esm.js.map
